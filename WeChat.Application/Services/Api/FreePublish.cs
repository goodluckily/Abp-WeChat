using Microsoft.AspNetCore.Authorization;
using Microsoft.AspNetCore.Http;
using System;
using System.IO;
using System.Text;
using System.Threading.Tasks;
using Volo.Abp;
using Volo.Abp.Application.Services;
using WeChat.Domain;
using WeChat.Domain.IRepository;
using WeChat.Shared;
using WeChat.Http.WeiChatApi;
using Microsoft.AspNetCore.Mvc;
using System.Collections.Generic;
using Newtonsoft.Json;
using System.Linq;
using Newtonsoft.Json.Linq;

namespace WeChat.Application.Services.Api
{
    /// <summary>
    /// 文章发布
    /// </summary>
    public class FreePublish : BaseApiService
    {
        /// <summary>
        /// 获取发布文章内容
        /// </summary>
        /// <returns></returns>
        [HttpGet("GetFreePublishList")]
        public async Task<DataResult> GetFreePublishList()
        {
            var token = await GetTokenAsync(WeiChatEnum.CodeShare);
            Dictionary<string, object> dic = new();
            dic.Add("offset", 0);
            dic.Add("count", 1);
            //dic.Add("no_content", 0);
            dynamic result = WeChatApi.PostFreePublish(token, dic);

            //var ss = "{\"item\":[{\"article_id\":\"8YxeHEPetBVKaukYlMPZSXiVW0yMDeqz_KKZglI0lvpdy4ZexYfFZqk8ZKvtM65Y\",\"content\":{\"news_item\":[{\"title\":\"快来投票吧~\",\"author\":\"cy\",\"digest\":\"File微信搞笑拉票话语，吸引好友眼球！1、以前,有一张小小的票放在你面前,你没有投正因那时你不懂得去珍惜，\",\"content\":\"<p><span class=\\\"vote_area\\\"><iframe scrolling=\\\"no\\\" frameborder=\\\"0\\\" class=\\\"vote_iframe js_editor_vote_card\\\" data-display-style=\\\"height: 495px;\\\" data-display-src=\\\"\\/cgi-bin\\/readtemplate?t=vote\\/vote-new_tmpl&amp;__biz=MzkwMTMwMjc5Mg==&amp;supervoteid=726459920&amp;token=1666284053&amp;lang=zh_CN\\\" data-src=\\\"\\/mp\\/newappmsgvote?action=show&amp;__biz=MzkwMTMwMjc5Mg==&amp;supervoteid=726459920#wechat_redirect\\\" data-supervoteid=\\\"726459920\\\" allowfullscreen=\\\"\\\"><\\/iframe><span><\\/span><span><\\/span><\\/span><a class=\\\"weapp_text_link js_weapp_entry\\\" style=\\\"font-size:17px;\\\" data-miniprogram-appid=\\\"wxb7f6951d9c63797e\\\" data-miniprogram-path=\\\"pages\\/logs\\/logs\\\" data-miniprogram-nickname=\\\"File\\\" href=\\\"\\\" data-miniprogram-type=\\\"text\\\" data-miniprogram-servicetype=\\\"\\\" href=\\\"\\\">File<\\/a><\\/p><section><mpsearch class=\\\"js_mpsearch appmsg_search_iframe js_uneditable custom_select_card\\\" data-keywords=\\\"%5B%7B%22label%22%3A%22%E5%88%86%E4%BA%AB%22%7D%5D\\\" data-parentclass=\\\"appmsg_search_iframe_wrp\\\" data-ratio=\\\"1.5664335664335665\\\" data-w=\\\"286\\\"><\\/mpsearch><\\/section><section class=\\\"mp_profile_iframe_wrp\\\"><mpprofile class=\\\"js_uneditable custom_select_card mp_profile_iframe\\\" data-pluginname=\\\"mpprofile\\\" data-id=\\\"MzUzNDMzOTE5OQ==\\\" data-headimg=\\\"http:\\/\\/mmbiz.qpic.cn\\/mmbiz_png\\/LztHkqkbPjacr1PuQsSU4wrLNicCdsYQjgwGLiaTRlBDnB3p9rKoztkH5SibaiatmL8JRg97zhVricoMubTL7W2X2Ig\\/0?wx_fmt=png\\\" data-nickname=\\\"file\\\" data-alias=\\\"\\\" data-signature=\\\"程序员的测试公众号，相信有一天我们能改变世界\\\" data-from=\\\"0\\\"><\\/mpprofile><\\/section><p style=\\\"line-height: 1.75em;\\\"><br  \\/><\\/p><p style=\\\"line-height: 3em;\\\">微信搞笑拉票话语，吸引好友眼球！<\\/p><p style=\\\"line-height: 1.75em;\\\">1、以前,有一张小小的票放在你面前,你没有投正因那时你不懂得去珍惜，此刻说后悔还来得及感谢上苍再次给你这个投票机会，你必须要投XXX一票!如果必须要问我选取多少票,我愿意是一百万票。<\\/p><p style=\\\"line-height: 1.75em;\\\">2、无意中发现：一个城市的广告重点，已经从不孕不育转变为美容整形，这说明大家逐渐明白了，其实不能繁衍的主要病因在脸，看脸的时代，投XXX一票，让世界充满美。<\\/p><p style=\\\"line-height: 1.75em;\\\">3、我的票数已经满天飞了，但想起来还有一个你躲在九宵云外，因此我上天入地寻找你，最后找到你了，拜托，把这张漂亮的选票放进我的箱子里保管吧，我会把它当成万大奖的彩票来对待的。<\\/p><p style=\\\"line-height: 1.75em;\\\">4、有多少人从无话不谈到无话可谈！有多少缘从一朝相逢到一夕离散！珍惜当下，帮我投一票。&nbsp;<\\/p><p style=\\\"line-height: 1.75em;\\\">5、我能够理解失败但是我拒绝平庸请投我一票多谢你的支持!!&nbsp;<\\/p><p style=\\\"line-height: 1.75em;\\\">6、只要有第一次上班不化妆，之后就会有一千次一万次 ，只要你投我一票，将来还你千千万万票。<\\/p><p style=\\\"line-height: 1.75em;\\\">7、心理学家发现：一个人说的话若90%以上是废话，他就快乐。若废话不足50%，快乐感则不足。在交流中，没有太强目的性的语言，更容易让人亲近。所以，我们每天都在找＂幸福＂。幸福是什么呢？大概就是找到了一个愿意听你说废话并愿意帮我投票的人。&nbsp;<\\/p><p style=\\\"line-height: 1.75em;\\\">8、哈哈哈哈哈妈呀。微信如果出了“表情来源”功能查询，8888888对情侣都会分手，信不信？同意的老铁帮忙投一票&nbsp;<\\/p><p style=\\\"line-height: 1.75em;\\\">9、经常删朋友圈和微博的原因是：因为这一秒高傲冷漠的自己，讨厌上一秒愚昧矫情的自己。而为了让你投票，我可以什么都不删。&nbsp;<\\/p><p style=\\\"line-height: 1.75em;\\\">10、熬夜分是等级的：熬夜和同事social彼此最后心里都很累但又不好表现出来，下等。熬夜和朋友一起玩嘈杂但不失活力，次等；独自熬夜自己玩有趣又闲适，愿意帮我投票的，上等；&nbsp;<\\/p><p style=\\\"line-height: 1.75em;\\\">11、还记得小时候蹦床不小心摔倒后，其他人还是继续跳，让你起不来吗？这就是成年人的生活。但我不一样，你帮我投票，我就不跳了。&nbsp;<\\/p><p style=\\\"line-height: 1.75em;\\\">12、我的票数已经满天飞了，但想起来还有一个你躲在九宵云外，因此我上天入地寻找你，最后找到你了，拜托，把这张漂亮的选票放进我的箱子里保管吧，我会把它当成万大奖的彩票来对待的。&nbsp;<\\/p><p style=\\\"line-height: 1.75em;\\\">13、喜欢我，就投我一票吧！！！！虽不一定是最优秀的拉票词，但一定是我最认真写的拉票词。&nbsp;<\\/p><p style=\\\"line-height: 1.75em;\\\">14、明事理者，投我票也！！不能太商业 不能太成熟 不能太低水准！做自己所做、说自己所感，因为重要的人不会介意，介意的人不重要。<\\/p>\",\"content_source_url\":\"\",\"thumb_media_id\":\"2eq_O87mgSO3lfwRIzJMRTruxHmUqXM0oXAzqP2_5RTmN07_Q7zBimuxYEpW1t9V\",\"show_cover_pic\":0,\"url\":\"http:\\/\\/mp.weixin.qq.com\\/s?__biz=MzkwMTMwMjc5Mg==&mid=2247483701&idx=1&sn=2f43a68d7841bec28b173444e690ac5b&chksm=c0b79e52f7c01744650dc4b26363c515466dd732838656680689276320e6cb703dd7a3950f8d#rd\",\"thumb_url\":\"http:\\/\\/mmbiz.qpic.cn\\/mmbiz_jpg\\/YlW6Zmy5hQwjCB2u3ICLzLUwzLbhzEFTDbglJI2wCDLnHarKtjPJ1QVx8ZBvGObVhOicJATh4L2zQEJN6ib5Qfrw\\/0?wx_fmt=jpeg\",\"need_open_comment\":0,\"only_fans_can_comment\":0,\"is_deleted\":false}],\"create_time\":1639058671,\"update_time\":1639058813},\"update_time\":1639058813},{\"article_id\":\"8YxeHEPetBVKaukYlMPZSZOfMcXea5Jl-zSOeq8JG_YWMtdvX3FqFUZ-_I8pBvCW\",\"content\":{\"news_item\":[{\"title\":\"Puppies -三只小狗\",\"author\":\"\",\"digest\":\"&nbsp;可爱小狗打架，嘻嘻打闹~\",\"content\":\"\",\"content_source_url\":\"\",\"thumb_media_id\":\"\",\"show_cover_pic\":0,\"url\":\"http:\\/\\/mp.weixin.qq.com\\/s?__biz=MzkwMTMwMjc5Mg==&mid=2247483671&idx=1&sn=b6f7806431869da3edb0f8c8ad7c1b34&chksm=c0b79e70f7c017666315fd2cd84fb01aa7b405ca0a887dce56537f0e5f62e5a9107712fa3705#rd\",\"thumb_url\":\"http:\\/\\/mmbiz.qpic.cn\\/mmbiz_jpg\\/YlW6Zmy5hQyddNaM8a9UToU1LNgUTnxYnamSoU7qnrm5iagOiclD5x0oib2TrPNptIwfrlH2SgjiamCqkWya9m69QA\\/0?wx_fmt=jpeg\",\"need_open_comment\":0,\"only_fans_can_comment\":0,\"is_deleted\":false}],\"create_time\":1636371306,\"update_time\":1636371311},\"update_time\":1636371311},{\"article_id\":\"8YxeHEPetBVKaukYlMPZSVihEnrUu1pPP17AgnSy9kzUpIj_9ZREhWaq_O1ac3Ow\",\"content\":{\"news_item\":[{\"title\":\"风景美如画\",\"author\":\"\",\"digest\":\"《浪淘沙·望海》\\n乘桴于海上垂钓，可曾钓得大鳌吗？其实那钓竿也只是轻拂珊瑚罢了。沧海桑田的巨变，只有麻姑知晓，要想知道这巨变，只有问麻姑了。白浪滔天，一片迷蒙中，哪得见蓬壶？\",\"content\":\"\",\"content_source_url\":\"\",\"thumb_media_id\":\"\",\"show_cover_pic\":0,\"url\":\"http:\\/\\/mp.weixin.qq.com\\/s?__biz=MzkwMTMwMjc5Mg==&mid=2247483665&idx=1&sn=cef9e01a94c36c22bad43bf753bd9934&chksm=c0b79e76f7c01760ddcc8301411ffc5e21e6bcd5862148d693f7845062eb1212dfdc771c472e#rd\",\"thumb_url\":\"http:\\/\\/mmbiz.qpic.cn\\/mmbiz_jpg\\/YlW6Zmy5hQyddNaM8a9UToU1LNgUTnxYuXibz7vnfLic8t6SIAgyNhY03Z1C50Vs5dAgvphdhS7icHCW9HBRWpagw\\/0?wx_fmt=jpeg\",\"need_open_comment\":0,\"only_fans_can_comment\":0,\"is_deleted\":false}],\"create_time\":1636370361,\"update_time\":1636370364},\"update_time\":1636370364},{\"article_id\":\"8YxeHEPetBVKaukYlMPZScYrPKGFMpU0b4HV-WDcQJ9Bl1-iozuAFxMbFANbfBSK\",\"content\":{\"news_item\":[{\"title\":\"​.NET百度百科介绍\",\"author\":\"\",\"digest\":\".NET是一种用于构建多种应用的免费开源开发平台，可以使用多种语言，编辑器和库开发Web应用、Web API\",\"content\":\"<section style=\\\"text-indent: 2em;\\\"><span style=\\\"color: rgb(26, 27, 28);font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;text-align: left;background-color: rgb(255, 255, 255);\\\">.NET是一种用于构建多种应用的免费开源开发平台，可以使用多种语言，编辑器和库开发Web应用、Web API和微服务、云中的无服务器函数、云原生应用、移动应用、桌面应用、Windows WPF、Windows窗体、通用 Windows平台 (UWP)、游戏、物联网 (IoT)、机器学习、控制台应用、Windows服务。.NET类库在不同应用和应用类型中共享功能，无论构建哪种类型的应用，代码和项目文件看起来都一样，可以访问每个应用的相同运行时、API和语言功能......<\\/span><\\/section><p style=\\\"text-align: center;\\\"><img class=\\\"rich_pages wxw-img\\\" data-croporisrc=\\\"https:\\/\\/mmbiz.qpic.cn\\/mmbiz_jpg\\/YlW6Zmy5hQwu4Biavb0HrCF2I9myruCLQO6zssTKS8Bxm509bqH9dEfMFD6nOThK9LqebLuatsspaaGXia9a9JLw\\/0?wx_fmt=jpeg\\\" data-cropx1=\\\"74.74048442906575\\\" data-cropx2=\\\"1044.4982698961937\\\" data-cropy1=\\\"108.37370242214531\\\" data-cropy2=\\\"506.36678200692035\\\" data-fileid=\\\"100000003\\\" data-galleryid=\\\"\\\" data-ratio=\\\"0.4092783505154639\\\" data-s=\\\"300,640\\\" data-src=\\\"https:\\/\\/mmbiz.qpic.cn\\/mmbiz_jpg\\/YlW6Zmy5hQwu4Biavb0HrCF2I9myruCLQJhhv1tbGcJHibN4cxzdiaQjGIKFE3nBNtm9W1zUjm9uSSQWMnKhvD7gw\\/640?wx_fmt=jpeg\\\" data-type=\\\"jpeg\\\" data-w=\\\"970\\\" style=\\\"width: 519px;height: 213px;\\\"><\\/p><p><span style=\\\"color: rgb(26, 27, 28);font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 14px;text-align: left;background-color: rgb(255, 255, 255);\\\"><\\/span><br  \\/><\\/p>\",\"content_source_url\":\"\",\"thumb_media_id\":\"2eq_O87mgSO3lfwRIzJMRbqdfbL0NR9TQiEcHBaTRjOVZ01CNCCUKu4XzrnX_HAH\",\"show_cover_pic\":0,\"url\":\"http:\\/\\/mp.weixin.qq.com\\/s?__biz=MzkwMTMwMjc5Mg==&mid=2247483657&idx=1&sn=832707fd7630c3ab48e806858456e823&chksm=c0b79e6ef7c01778019acb7d5e80d354d43078b1cdb5092b6ea82229330210cb15c5e4a99567#rd\",\"thumb_url\":\"http:\\/\\/mmbiz.qpic.cn\\/mmbiz_jpg\\/YlW6Zmy5hQwu4Biavb0HrCF2I9myruCLQZKCaicy3omYw0G0tcuLRHXaRswuVYyic7r7QqP9F3hBL3xE4zNQHn96w\\/0?wx_fmt=jpeg\",\"need_open_comment\":0,\"only_fans_can_comment\":0,\"is_deleted\":false}],\"create_time\":1636274285,\"update_time\":1636274377},\"update_time\":1636274377}],\"total_count\":4,\"item_count\":4}";

            //var adfasf = JsonConvert.DeserializeObject<JObject>(ss);


            return Result.Json("");
        }
    }
}
